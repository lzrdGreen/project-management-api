{% extends 'projectapp/base.html' %}
{% load highlight_tags %}


{% block title %}Search Results{% endblock %}

{% block content %}
<h1>Search Results</h1>

{% if query %}
    <p>Your query was: "{{ query }}"</p>
{% endif %}

<!-- Projects Results Section -->
<h2>Project Results</h2>
{% if project_results %}
<ul>
    {% for project in project_results %}
    <li>
        <h3><a href="{% url 'project_detail' project.id %}">{{ project.title|highlight:query }}</a></h3>
        <p>{{ project.description|highlight:query }}</p>
    </li>
    {% endfor %}
</ul>
{% else %}
    <p>No projects found matching your search query.</p>
{% endif %}

<!-- Tasks Results Section -->
<h2>Task Results</h2>
{% if task_results %}
<ul>
    {% for task in task_results %}
    <li>
        <h3><a href="{% url 'task_detail' task.id %}">{{ task.title|highlight:query }}</a></h3>
        <p>{{ task.description|highlight:query }}</p>       
    </li>
    {% endfor %}
</ul>
{% else %}
    <p>No tasks found matching your search query.</p>
{% endif %}
<h2>Milestone Results</h2>
{% if milestone_results %}
<ul>
    {% for milestone in milestone_results %}
    <li>
        <h3><a href="{% url 'milestone_detail' pk=milestone.id %}">{{ milestone.name|highlight:query }}</a> (Project: {{ milestone.project.title }})</h3>
        <p>{{ milestone.description|highlight:query }}</p>
        <p><small>Due Date: {{ milestone.due_date|date:"F j, Y" }}</small></p>
    </li>
    {% endfor %}
</ul>
{% else %}
    <p>No milestones found matching your search query.</p>
{% endif %}
{% endblock %}
